# Restaurant API Test File
# This file demonstrates all the API endpoints for the Restaurant Management System

### Variables
@baseUrl = http://localhost:5127/api
@contentType = application/json

### Get all menu items
GET {{baseUrl}}/MenuItems

### Get menu items filtered by category (MainCourse)
GET {{baseUrl}}/MenuItems?kind=MainCourse

### Get only available menu items
GET {{baseUrl}}/MenuItems?availableOnly=true

### Get menu items by category endpoint
GET {{baseUrl}}/MenuItems/category/Beverage

### Get specific menu item by ID (replace with actual ID)
GET {{baseUrl}}/MenuItems/{menuItemId}

### Create new menu item
POST {{baseUrl}}/MenuItems
Content-Type: {{contentType}}

{
  "name": "Bún Bò Huế",
  "kind": 0,
  "price": 45000,
  "description": "Bún bò Huế cay thơm đặc biệt"
}

### Update menu item (replace with actual ID)
PUT {{baseUrl}}/MenuItems/{menuItemId}
Content-Type: {{contentType}}

{
  "name": "Bún Bò Huế Cay",
  "kind": 0,
  "price": 50000,
  "description": "Bún bò Huế cay thơm đặc biệt - phiên bản cay nồng",
  "imageUrl": "https://example.com/bun-bo-hue-cay.jpg",
  "isAvailable": true
}

### Toggle menu item availability
PATCH {{baseUrl}}/MenuItems/{menuItemId}/availability

### Delete menu item
DELETE {{baseUrl}}/MenuItems/{menuItemId}

###############################################################################
# TABLES API
###############################################################################

### Get all tables
GET {{baseUrl}}/Tables

### Get only available tables
GET {{baseUrl}}/Tables?availableOnly=true

### Get available tables with minimum capacity
GET {{baseUrl}}/Tables/available?minCapacity=4

### Get specific table by ID
GET {{baseUrl}}/Tables/{tableId}

### Get table orders
GET {{baseUrl}}/Tables/{tableId}/orders

### Create new table
POST {{baseUrl}}/Tables
Content-Type: {{contentType}}

{
  "name": "Bàn 4",
  "capacity": 8,
  "description": "Bàn lớn cho nhóm đông người",
  "isAvailable": true
}

### Update table
PUT {{baseUrl}}/Tables/{tableId}
Content-Type: {{contentType}}

{
  "name": "Bàn VIP 1",
  "capacity": 6,
  "description": "Bàn VIP với không gian riêng tư",
  "isAvailable": true
}

### Toggle table availability
PATCH {{baseUrl}}/Tables/{tableId}/availability

### Delete table
DELETE {{baseUrl}}/Tables/{tableId}

###############################################################################
# ORDERS API
###############################################################################

### Get all orders
GET {{baseUrl}}/Orders

### Get orders with filters
GET {{baseUrl}}/Orders?status=Pending&fromDate=2025-06-01&toDate=2025-06-03

### Get orders by table
GET {{baseUrl}}/Orders?tableId={tableId}

### Get specific order by ID
GET {{baseUrl}}/Orders/{orderId}

### Get orders by status
GET {{baseUrl}}/Orders/status/Pending

### Get orders summary
GET {{baseUrl}}/Orders/summary

### Get orders summary for date range
GET {{baseUrl}}/Orders/summary?fromDate=2025-06-01&toDate=2025-06-03

### Create new order
POST {{baseUrl}}/Orders
Content-Type: {{contentType}}

{
  "tableId": "{tableId}",
  "note": "Khách hàng yêu cầu ít cay",
  "items": [
    {
      "menuItemId": "{menuItemId1}",
      "quantity": 2
    },
    {
      "menuItemId": "{menuItemId2}",
      "quantity": 1
    }
  ]
}

### Update order status
PATCH {{baseUrl}}/Orders/{orderId}/status
Content-Type: {{contentType}}

{
  "status": "InProgress"
}

### Add items to existing order
POST {{baseUrl}}/Orders/{orderId}/items
Content-Type: {{contentType}}

{
  "items": [
    {
      "menuItemId": "{menuItemId3}",
      "quantity": 1
    }
  ]
}

### Cancel order
PATCH {{baseUrl}}/Orders/{orderId}/cancel

###############################################################################
# SAMPLE WORKFLOW
###############################################################################

### 1. Get all tables to find an available one
GET {{baseUrl}}/Tables?availableOnly=true

### 2. Get menu items to see what's available
GET {{baseUrl}}/MenuItems?availableOnly=true

### 3. Create an order (replace IDs with actual values from steps 1 & 2)
# POST {{baseUrl}}/Orders
# Content-Type: {{contentType}}
#
# {
#   "tableId": "actual-table-id-here",
#   "note": "Khách yêu cầu phục vụ nhanh",
#   "items": [
#     {
#       "menuItemId": "actual-menu-item-id-here",
#       "quantity": 2
#     }
#   ]
# }

### 4. Update order status to in progress
# PATCH {{baseUrl}}/Orders/{orderId}/status
# Content-Type: {{contentType}}
#
# {
#   "status": "InProgress"
# }

### 5. Complete the order
# PATCH {{baseUrl}}/Orders/{orderId}/status
# Content-Type: {{contentType}}
#
# {
#   "status": "Completed"
# }

### 6. View daily summary
GET {{baseUrl}}/Orders/summary?fromDate=2025-06-03&toDate=2025-06-04
